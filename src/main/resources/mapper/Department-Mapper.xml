<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ddit.proj.mapper.DepartmentMapper">
	<!-- {"colCode":"ART","depNm":"미용학과","depCode":"A2","depDc":"asdf","depCap":"2","depTel":"0421231234","provost":"201701P001","TA":"201803E008"} -->
	<insert id="insertDepartment" parameterType="DepartmentVO">
		 INSERT INTO department (DEP_CODE, COL_CODE, DEP_NM, DEP_DC, DEP_DRHF, DEP_CAP, DEP_TEL, DEP_DEL_YN, MEM_NO)
		 VALUES(#{depCode},#{colCode},#{depNm},#{depDc},#{depDrhf},#{depCap},#{depTel},'N',#{memNo})
	</insert>
	
	<select id="getdepartmentVO" parameterType="String" resultType="DepartmentVO">
		SELECT * FROM DEPARTMENT WHERE DEP_CODE = ${depCode}
	</select>
	
	<!-- 학과장 불러오는 쿼리 (교수목록 - 학과장교수목록 = 학과장제외교수목록) -->
	<select id="selectProvostList" parameterType="String" resultType="DepartmentVO">
        SELECT A.MEM_NO
		         , (SELECT C.MEM_NM FROM MEMBER C WHERE C.MEM_NO = A.MEM_NO) MEM_NM
		FROM  PROFESSOR A
		WHERE  NOT EXISTS(
		        SELECT B.DEP_DRHF FROM DEPARTMENT B
		        WHERE  B.DEP_DRHF = A.MEM_NO
		)
    </select>

	<!-- 조교 불러오는 쿼리  (교직원목록 - 조교목록 = 조교제외교직원목록) -->	
	<select id="selectTAList" parameterType="String" resultType="DepartmentVO">
	    SELECT A.MEM_NO
		         , (SELECT C.MEM_NM FROM MEMBER C WHERE C.MEM_NO = A.MEM_NO) MEM_NM
		FROM  EMPLOYEE A
		WHERE  NOT EXISTS(
		        SELECT B.MEM_NO FROM DEPARTMENT B
		        WHERE  B.MEM_NO = A.MEM_NO
		)
		AND  A.CODE_EMP_DV = '05'
	</select>
	
	<!-- 단과대 불러오는 쿼리 -->
	<select id="selectColList" parameterType="String" resultType="DepartmentVO">
		SELECT CODE_ID, CODE_NM
		FROM CODE
		WHERE GROUP_ID = #{groupId}
	</select>
	
	<!-- 학과 리스트 불러오는 쿼리 -->
	<select id="listDepartment" resultType="DepartmentVO">
        SELECT dep_nm FROM DEPARTMENT
    </select>
</mapper>